dnl AB: shamelessy stolen from kdelibs/kdecore.
dnl this makes boBacktrace() return something useful
AC_DEFUN([AC_CHECK_BACKTRACE],
[
AC_TRY_LINK(dnl
      [
        #include <execinfo.h>
      ],
      [
        void* trace[256];
        backtrace(trace, 256);
      ],
      [
        AC_DEFINE(HAVE_BACKTRACE, 1, [Define if execinfo.h exists and defines backtrace (GLIBC >= 2.1)])
	AC_MSG_RESULT(yes)
      ],
      AC_MSG_RESULT(no)
)
])
AC_CHECK_BACKTRACE
